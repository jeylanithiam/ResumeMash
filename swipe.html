{#
  swipe.html
  - Main recruiter interface.
  - Shows one resume at a time (embedded PDF).
  - Recruiter can choose "Pass" or "Mash".
  - The POST sends:
      - resume_id
      - choice = "pass" or "like"
    so the backend can record a swipe and load the next resume.
#}
{% extends "layout.html" %}

{% block content %}
<!-- Centered shell for swipe card -->
    <div class="rm-upload-shell">
    <!-- Main swipe card -->
        <div class="rm-card rm-card-tight">

        <!-- Header: title + candidate name + field -->
            <div class="rm-swipe-header text-center">
                <h2>Pass or Mash</h2>

            {# Only show name line if we have first_name for this resume #}
                {% if resume.first_name %}
                    <p class="mb-1 text-muted-soft">
                        Reviewing: {{ resume.first_name }} {{ resume.last_name }}
                    </p>
                {% endif %}

            <!-- Field label uses title case (e.g., "Finance" instead of "finance") -->
                <p class="text-subtle mb-3">
                    Field: {{ resume.job_field|title }}
                </p>
            </div>

        <!-- Embedded PDF for the current resume.
           - iframe points to /uploads/<filename>
           - URL flags (#toolbar=0&navpanes=0) hide the PDF viewer UI
             so it looks cleaner inside the card. -->
            <div class="mb-4" style="border-radius: 0.9rem; overflow: hidden; border: 1px solid #1f2937;">
                <iframe src="{{ url_for('uploaded_file', filename=resume.filename) }}#toolbar=0&navpanes=0&scrollbar=1" width="100%" height="650" style="border: none;"></iframe>
            </div>

        <!-- Swipe form: two buttons mapped to different choices -->
            <form method="post">
            <!-- Hidden field so the backend knows which resume was swiped -->
                <input type="hidden" name="resume_id" value="{{ resume.id }}">

            <!-- Sticky action bar (styled via .rm-swipe-actions in CSS)
             - Two full-width buttons on small screens
             - Side by side on larger screens -->
                <div class="rm-swipe-actions d-flex justify-content-between flex-wrap gap-3">
                <!-- Red "Pass" button (choice = pass => label 0 in DB/ML) -->
                    <button name="choice" value="pass" class="btn btn-fail btn-lg flex-grow-1" type="submit">
                        Pass
                    </button>

                <!-- Green "Mash" button (choice = like => label 1 in DB/ML) -->
                    <button name="choice" value="like" class="btn btn-pass btn-lg flex-grow-1" type="submit">
                        Mash
                    </button>
                </div>
            </form>

        </div>
    </div>
{% endblock %}
